// SPDX-License-Identifier: MIT
pragma solidity >=0.8.0;

import {DeployerHelper} from '../DeployerHelper.sol';

library ERC7914DetectorDeployer {
    function deploy(address caliburAddress) internal returns (address detector) {
        bytes memory args = abi.encode(caliburAddress);
        bytes memory initcode_ = abi.encodePacked(initcode(), args);
        detector = DeployerHelper.create2(initcode_);
    }

    /**
     * @dev autogenerated - run `./script/util/create_briefcase.sh` to generate current initcode
     *
     * @notice This initcode is generated from the following contract:
     * - Source Contract: src/pkgs/util-contracts/src/ERC7914Detector.sol
     * - solc: 0.8.19
     * - optimizer_runs: 200
     * - via_ir: false
     * - evm_version: paris
     */
    function initcode() internal pure returns (bytes memory) {
        return hex'60a060405234801561001057600080fd5b506040516103c53803806103c583398101604081905261002f91610040565b6001600160a01b0316608052610070565b60006020828403121561005257600080fd5b81516001600160a01b038116811461006957600080fd5b9392505050565b608051610335610090600039600081816068015260d301526103356000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c806337e276381461003b57806385bb2fa814610063575b600080fd5b61004e6100493660046102b7565b6100a2565b60405190151581526020015b60405180910390f35b61008a7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200161005a565b6000813b8082036100b65750600092915050565b6100bf83610135565b156101255760006100cf84610172565b90507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316816001600160a01b031603610114575060019392505050565b61011d81610191565b949350505050565b61012e83610191565b9392505050565b60006017826001600160a01b03163b101561015257506000919050565b61ef0160f01b610161836102a6565b6001600160e81b0319161492915050565b60008061017e836102a6565b60481c6001600160a01b03169392505050565b6040805160006024820181905260448201819052606480830182905283518084039091018152608490920183526020820180516001600160e01b031663789ff70160e01b9081179091529251909291839182916001600160a01b038716916101f991906102e0565b600060405180830381855afa9150503d8060008114610234576040519150601f19603f3d011682016040523d82523d6000602084013e610239565b606091505b509150915081801561024c575080516020145b1561027f57600081806020019051810190610267919061030f565b90506001811161027d5750600195945050505050565b505b81801561028b57508051155b1561029b57506000949350505050565b506000949350505050565b60006017600080843c505060005190565b6000602082840312156102c957600080fd5b81356001600160a01b038116811461012e57600080fd5b6000825160005b8181101561030157602081860181015185830152016102e7565b506000920191825250919050565b60006020828403121561032157600080fd5b505191905056fea164736f6c6343000813000a';
    }
}
