[profile.default]
src = "src"
out = "out"
libs = ["lib"]
bytecode_hash = "none"
verbosity = 2

fs_permissions = [
  { access = "read-write", path = ".forge-snapshots"},
  { access = "read", path = "script/" },
  { access = "read-write", path = "script/deploy/tasks" },
  { access = "read", path = "out/" }
]

skip = [
  "src/pkgs/**/audits/**",
  "src/pkgs/**/certora/**",
  "src/pkgs/**/lib/**",
  "src/pkgs/universal-router/permit2/**",
  "src/pkgs/universal-router/solmate/**",
  "src/pkgs/**/*.s.sol",
  "**/test/**",
  "*.t.sol",
]

additional_compiler_profiles = [
  { name = "v4-core", optimizer_runs = 44444444, via_ir = true, evm_version = "cancun" },
  { name = "v4-periphery", optimizer_runs = 1000000, via_ir = true, evm_version = "cancun" },
  { name = "via-ir", via_ir = true },
  { name = "via-ir-cancun", via_ir = true, evm_version = "cancun" },
  { name = "v2", optimizer_runs = 999999 },
  { name = "v3-core", optimizer_runs = 800, evm_version = "istanbul" },
  { name = "v3-periphery-lowest", optimizer_runs = 1000, evm_version = "istanbul", via_ir = false },
  { name = "v3-periphery-low", optimizer_runs = 2000, evm_version = "istanbul", via_ir = false },
  { name = "v3-periphery-default", optimizer_runs = 1000000, evm_version = "istanbul", via_ir = false },
  { name = "permit2", optimizer_runs = 1000000, via_ir = true },
  { name = "universal-router", optimizer_runs = 1000000, via_ir = true },
]

compilation_restrictions = [
  { paths = "src/pkgs/v2-core/contracts/[!i]*.sol", version = "0.5.16", min_optimizer_runs = 999999 },
  { paths = "src/pkgs/v2-periphery/contracts/[!i]*.sol", version = "0.6.6", min_optimizer_runs = 999999 },
  { paths = "src/pkgs/v3-core/contracts/[!i]|[!l]*.sol", version = "0.7.6", max_optimizer_runs = 800 },
  { paths = "src/pkgs/v3-core/contracts/libraries/TickBitmap.sol", version = "<0.8.0" },
  { paths = "src/pkgs/v3-periphery/contracts/**", version = "0.7.6", min_optimizer_runs = 1000000, via_ir = false },
  { paths = "src/pkgs/v3-periphery/contracts/NonFungiblePositionManager.sol", version = "0.7.6", max_optimizer_runs = 2000, via_ir = false },
  { paths = "src/pkgs/v3-periphery/contracts/NonFungibleTokenPositionDescriptor.sol", version = "0.7.6", max_optimizer_runs = 1000, via_ir = false },
  { paths = "src/pkgs/v3-periphery/contracts/libraries/NFTDescriptor.sol", version = "0.7.6", max_optimizer_runs = 1000, via_ir = false },
  { paths = "src/pkgs/v3-periphery/contracts/libraries/**", version = "<0.8.0" },
  { paths = "src/pkgs/permit2/src/**", version = "0.8.17", via_ir = true },
  { paths = "src/pkgs/v4-periphery/src/[!i]|[!l]*.sol", version = "0.8.26", via_ir = true, min_evm_version = "cancun", max_optimizer_runs = 1000000 },
  { paths = "src/pkgs/v4-periphery/src/libraries/Locker.sol", min_evm_version = "cancun" },
  { paths = "src/pkgs/v4-core/src/**", version = "0.8.26", via_ir = true, min_evm_version = "cancun", min_optimizer_runs = 44444444 },
  { paths = "src/pkgs/universal-router/contracts/**", via_ir = true },
  # Briefcase
  { paths = "src/briefcase/protocols/v2-periphery/libraries/UniswapV2Library.sol", version = "<0.8.0" },
  { paths = "src/briefcase/protocols/v3-core/libraries/TickBitmap.sol", version = "<0.8.0" },
  { paths = "src/briefcase/protocols/v3-periphery/libraries/**", version = "<0.8.0" },
  { paths = "src/briefcase/protocols/lib-external/solidity-lib/**", version = "<0.8.0" },
  { paths = "src/briefcase/protocols/v4-core/libraries/**", min_evm_version = "cancun" },
  { paths = "src/briefcase/protocols/v4-periphery/libraries/Locker.sol", min_evm_version = "cancun" },
]

[fmt]
line_length = 120
tab_width = 4
quote_style = "single"
sort_imports = true
number_underscore = "thousands"

[rpc_endpoints]
anvil = "http://127.0.0.1:8545"
sepolia = "https://sepolia.infura.io/v3/${INFURA_KEY}"

[etherscan]
sepolia = { key = "${ETHERSCAN_API_KEY}" }

# See more config options https://github.com/foundry-rs/foundry/tree/master/config